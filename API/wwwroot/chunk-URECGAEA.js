import{a as T,b as z}from"./chunk-GECYCS25.js";import{a as h}from"./chunk-VDTZMSPA.js";import{b as L}from"./chunk-KOCQOFPJ.js";import{B as J,C as f,D as _,G as E,I as Y,J as I,K as M,M as w,O as g,Q as R,R as $,U as D,x as N,z as d}from"./chunk-4BBGQPJZ.js";import{fa as F,h as O,j as y}from"./chunk-7YYXLKMB.js";import"./chunk-6XXA7HXI.js";import{Bb as v,Cb as U,Eb as j,Fb as k,Gb as i,Hb as r,Ib as p,Pb as b,Rb as x,Ub as q,bb as m,bc as n,cb as B,cc as S,dc as P,jc as c,ka as l,ma as s,sb as C,wb as u}from"./chunk-7JY3ZNOD.js";var A=class t{fb=l(w);accountService=l(L);router=l(y);activatedRoute=l(O);returnUrl="/shop";constructor(){let o=this.activatedRoute.snapshot.queryParams.returnUrl;o&&(this.returnUrl=o)}loginForm=this.fb.group({email:[""],password:[""]});onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>{this.accountService.getUserInfo().subscribe(),this.router.navigateByUrl(this.returnUrl)}})}registerForm=this.fb.group({});static \u0275fac=function(e){return new(e||t)};static \u0275cmp=s({type:t,selectors:[["app-login"]],standalone:!0,features:[c],decls:16,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["appearance","outline",1,"w-full","mb-4"],["formControlName","email","type","email","placeholder","name@example.com","matInput",""],["formControlName","password","type","password","placeholder","password","matInput",""],["mat-flat-button","","type","submit",1,"w-full","py-2"]],template:function(e,a){e&1&&(n(0,"<"),i(1,"mat-card",0)(2,"form",1),b("ngSubmit",function(){return a.onSubmit()}),i(3,"div",2)(4,"h1",3),n(5,"Login"),r()(),i(6,"mat-form-field",4)(7,"mat-label"),n(8,"Email address"),r(),p(9,"input",5),r(),i(10,"mat-form-field",4)(11,"mat-label"),n(12,"Password"),r(),p(13,"input",6),r(),i(14,"button",7),n(15,"Sign in"),r()()()),e&2&&(m(2),u("formGroup",a.loginForm))},dependencies:[g,E,N,f,_,I,M,h,D,T,R,F]})};function X(t,o){if(t&1&&(i(0,"mat-error"),n(1),r()),t&2){let e=x();m(),P("",e.label," is required")}}function Z(t,o){t&1&&(i(0,"mat-error"),n(1,"Email is invalid"),r())}var G=class t{constructor(o){this.controlDir=o;this.controlDir.valueAccessor=this}label="";type="text";writeValue(o){}registerOnChange(o){}registerOnTouched(o){}get control(){return this.controlDir.control}static \u0275fac=function(e){return new(e||t)(B(J,2))};static \u0275cmp=s({type:t,selectors:[["app-text-input"]],inputs:{label:"label",type:"type"},standalone:!0,features:[c],decls:6,vars:6,consts:[["appearance","outline",1,"w-full","mb-4"],["matInput","",3,"formControl","type","placeholder"]],template:function(e,a){e&1&&(i(0,"mat-form-field",0)(1,"mat-label"),n(2),r(),p(3,"input",1),C(4,X,2,1,"mat-error")(5,Z,2,0,"mat-error"),r()),e&2&&(m(2),S(a.label),m(),q("type",a.type),q("placeholder",a.label),u("formControl",a.control),m(),v(a.control.hasError("required")?4:-1),m(),v(a.control.hasError("email")?5:-1))},dependencies:[$,D,g,N,f,Y,R,T]})};function ee(t,o){if(t&1&&(i(0,"li"),n(1),r()),t&2){let e=o.$implicit;m(),S(e)}}function te(t,o){if(t&1&&(i(0,"div",8)(1,"ul",10),j(2,ee,2,1,"li",null,U),r()()),t&2){let e=x();m(2),k(e.validationErrors)}}var V=class t{fb=l(w);accountService=l(L);router=l(y);snack=l(z);validationErrors;registerForm=this.fb.group({firstName:["",d.required],lastName:["",d.required],email:["",[d.required,d.email]],password:["",d.required]});onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.snack.success("Registration successfully. You can  log in!"),this.router.navigateByUrl("/account/login")},error:o=>this.validationErrors=o})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=s({type:t,selectors:[["app-register"]],standalone:!0,features:[c],decls:12,vars:2,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["label","First name","formControlName","firstName"],["label","Last name","formControlName","lastName"],["label","Email address","formControlName","email"],["label","Password","formControlName","password","type","password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","","type","submit",1,"w-full","py-2"],[1,"list-disc","px-3"]],template:function(e,a){e&1&&(i(0,"mat-card",0)(1,"form",1),b("ngSubmit",function(){return a.onSubmit()}),i(2,"div",2)(3,"h1",3),n(4,"Register"),r()(),p(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),C(9,te,4,0,"div",8),i(10,"button",9),n(11,"Register"),r()()()),e&2&&(m(),u("formGroup",a.registerForm),m(8),v(a.validationErrors?9:-1))},dependencies:[g,E,f,_,I,M,h,F,G]})};var De=[{path:"login",component:A},{path:"register",component:V}];export{De as accountRoutes};
